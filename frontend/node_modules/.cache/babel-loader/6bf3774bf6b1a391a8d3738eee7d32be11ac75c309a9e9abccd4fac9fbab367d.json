{"ast":null,"code":"import axios from'axios';import React,{useEffect,useState}from'react';import{useDispatch,useSelector}from'react-redux';import{getAllusers}from'../redux/userSlice';import{Link,useNavigate}from\"react-router-dom\";import Button from'react-bootstrap/Button';import ToggleButton from'react-bootstrap/ToggleButton';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function UsersList(){const[checked,setChecked]=useState(false);const dispatch=useDispatch();const navigate=useNavigate();const users=useSelector(state=>{var _state$users$users,_state$users;return(_state$users$users=state===null||state===void 0?void 0:(_state$users=state.users)===null||_state$users===void 0?void 0:_state$users.users)!==null&&_state$users$users!==void 0?_state$users$users:[];});const deleteAccount=async id=>{try{const res=await axios.delete(\"http://localhost:5000/adminRemove/\".concat(id),{withCredentials:true});if(res.data.success){}else{alert('Account deletion failed.');}}catch(error){alert(\"Error during delete: \".concat(error.message));}};useEffect(()=>{const userLi=async()=>{try{const res=await axios.get(\"http://localhost:5000/users\",{withCredentials:true});if(res.data){var _res$data$allUsers,_res$data;dispatch(getAllusers((_res$data$allUsers=res===null||res===void 0?void 0:(_res$data=res.data)===null||_res$data===void 0?void 0:_res$data.allUsers)!==null&&_res$data$allUsers!==void 0?_res$data$allUsers:[]));}}catch(error){console.error('Error fetching data:',error);}};userLi();},[deleteAccount]);return/*#__PURE__*/_jsx(\"div\",{className:\"usersList\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"users-table\",children:[/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"User Name\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Email\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Status\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Remove\"})]}),users&&users.map((element,index)=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:element.userName}),/*#__PURE__*/_jsx(\"td\",{children:element.email}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(ToggleButton,{className:\"mb-2\",id:\"toggle-check\",type:\"checkbox\",variant:\"outline-success\",checked:checked,value:\"1\",onChange:e=>setChecked(e.currentTarget.checked),children:\"Active\"})},index),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(Button,{variant:\"danger\",onClick:()=>deleteAccount(element._id),children:\"Remove\"})})]},index))]})});}export default UsersList;","map":{"version":3,"names":["axios","React","useEffect","useState","useDispatch","useSelector","getAllusers","Link","useNavigate","Button","ToggleButton","jsx","_jsx","jsxs","_jsxs","UsersList","checked","setChecked","dispatch","navigate","users","state","_state$users$users","_state$users","deleteAccount","id","res","delete","concat","withCredentials","data","success","alert","error","message","userLi","get","_res$data$allUsers","_res$data","allUsers","console","className","children","map","element","index","userName","email","type","variant","value","onChange","e","currentTarget","onClick","_id"],"sources":["D:/faiz/BIXEL/Node-js Express/retaurants-dianamic/frontend/src/componetns/UsersList.jsx"],"sourcesContent":["import axios from 'axios'\r\nimport React, { useEffect, useState } from 'react'\r\nimport { useDispatch, useSelector } from 'react-redux'\r\nimport { getAllusers } from '../redux/userSlice'\r\nimport { Link, useNavigate } from \"react-router-dom\";\r\nimport Button from 'react-bootstrap/Button';\r\nimport ToggleButton from 'react-bootstrap/ToggleButton';\r\n\r\n\r\n\r\nfunction UsersList() {\r\n    const [checked, setChecked] = useState(false);\r\n    const dispatch = useDispatch()\r\n    const navigate = useNavigate()\r\n    const users = useSelector((state) => state?.users?.users ?? [])\r\n\r\n    const deleteAccount = async (id) => {\r\n        try {\r\n            const res = await axios.delete(`http://localhost:5000/adminRemove/${id}`, {\r\n                withCredentials: true\r\n            });\r\n\r\n            if (res.data.success) {\r\n                \r\n            } else {\r\n                alert('Account deletion failed.');\r\n            }\r\n        } catch (error) {\r\n            alert(`Error during delete: ${error.message}`);\r\n        }\r\n    };\r\n\r\n    useEffect(() => {\r\n        const userLi = async () => {\r\n\r\n            try {\r\n                const res = await axios.get(`http://localhost:5000/users`, { withCredentials: true })\r\n                if (res.data) {\r\n                    dispatch(getAllusers(res?.data?.allUsers ?? []))\r\n                }\r\n            } catch (error) {\r\n                console.error('Error fetching data:', error);\r\n            }\r\n        }\r\n        userLi()\r\n    }, [deleteAccount])\r\n    \r\n\r\n    return (\r\n        <div className='usersList'>\r\n            <table className='users-table'>\r\n                <tr>\r\n                    <th>User Name</th>\r\n                    <th>Email</th>\r\n                    <th>Status</th>\r\n                    <th>Remove</th>\r\n                </tr>\r\n                {users && users.map((element, index) => (\r\n                    <tr key={index}>\r\n                        <td>{element.userName}</td>\r\n                        <td>{element.email}</td>\r\n                        <td key={index}>\r\n                            <ToggleButton\r\n                                className=\"mb-2\"\r\n                                id=\"toggle-check\"\r\n                                type=\"checkbox\"\r\n                                variant=\"outline-success\"\r\n                                checked={checked}\r\n                                value=\"1\"\r\n                                onChange={(e) => setChecked(e.currentTarget.checked)}\r\n                            >\r\n                                Active\r\n                            </ToggleButton>\r\n                        </td>\r\n                        <td><Button variant=\"danger\" onClick={() => deleteAccount(element._id)}>Remove</Button></td>\r\n\r\n                    </tr>\r\n                ))}\r\n\r\n            </table>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default UsersList\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}