{"ast":null,"code":"import React,{useState}from'react';import'./style.css';import user from'./images/icons8-username-30.png';import password from'./images/icons8-password-24.png';import{Link}from'react-router-dom';import{useNavigate}from'react-router-dom';import{useDispatch,useSelector}from'react-redux';import axios from'axios';import Button from'react-bootstrap/Button';import{userAuth}from'../redux/userSlice';import{ToastContainer,toast,Bounce}from'react-toastify';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function AddresLogin(){const notify=()=>{toast.success('Login successful !!!',{position:\"top-center\",autoClose:3000,hideProgressBar:false,closeOnClick:true,pauseOnHover:true,draggable:true,progress:undefined,theme:\"light\",transition:Bounce});};const[formErr,formSetErr]=useState({});const[isSubmited,setSubmit]=useState(false);const navigate=useNavigate();const dispatch=useDispatch();const[input,setInput]=useState({userName:\"\",password:\"\"});const isAuth=useSelector(state=>state.users.isAuth);const navigateNext=status=>{if(status.success){notify();dispatch(userAuth(status));setTimeout(async()=>{navigate('/');},2999);}else{alert(\"Invalid password or username\");}};const HandleInputChange=e=>{const name=e.target.name;const value=e.target.value;setInput({...input,[name]:value});};const validateForm=values=>{const errors={};var usernamePattern=/^[a-zA-Z]{5,20}_?[a-zA-Z]*$/;var passwordPattern=/^\\d{8}$/;if(!values.userName){errors.userName=\"Username is required\";}else if(!usernamePattern.test(values.userName)){errors.userName=\"Username must be 3-20 characters and can only contain letters\";}if(!values.password){errors.password=\"password is required\";}else if(!passwordPattern.test(values.password)){errors.password=\"Enter 8 digit\";}return errors;};const formSumit=async()=>{if(Object.keys(formErr).length===0&&isSubmited){try{const res=await axios.post(\"http://localhost:5000/login\",input,{withCredentials:true});navigateNext(res.data);}catch{toast.error('Error during login',{position:\"top-center\",autoClose:3000,closeOnClick:true,pauseOnHover:true,draggable:true,progress:undefined,theme:\"light\",transition:Bounce});}}};const HandleSubmit=e=>{e.preventDefault();formSetErr(validateForm(input));setSubmit(true);formSumit();};return/*#__PURE__*/_jsxs(\"div\",{className:\"Signup\",children:[/*#__PURE__*/_jsx(ToastContainer,{}),/*#__PURE__*/_jsx(\"div\",{className:\"Signup-sub\",children:/*#__PURE__*/_jsxs(\"form\",{action:\"\",onSubmit:HandleSubmit,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"input-sty-prnt\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"sing-head\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Welcome Back\"}),/*#__PURE__*/_jsx(\"p\",{children:/*#__PURE__*/_jsx(\"b\",{children:\"Enter your credential to login\"})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"input-sty\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"\",style:{'textAlign':'center'},children:/*#__PURE__*/_jsx(\"b\",{children:\"User name\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"img-inp\",children:[/*#__PURE__*/_jsx(\"img\",{className:\"iconsLo\",src:user,alt:\"\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:input.userName,name:\"userName\",onChange:HandleInputChange})]})]}),/*#__PURE__*/_jsx(\"span\",{className:\"error-message\",children:formErr.userName}),/*#__PURE__*/_jsxs(\"div\",{className:\"input-sty\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"\",style:{'textAlign':'center'},children:/*#__PURE__*/_jsx(\"b\",{children:\"Password\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"img-inp\",children:[/*#__PURE__*/_jsx(\"img\",{className:\"iconsLo\",src:password,alt:\"\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",value:input.password,name:\"password\",onChange:HandleInputChange})]})]}),/*#__PURE__*/_jsx(\"span\",{className:\"error-message\",children:formErr.password})]}),/*#__PURE__*/_jsx(\"div\",{className:\"fgt-pass\",children:/*#__PURE__*/_jsx(\"p\",{children:/*#__PURE__*/_jsx(\"b\",{children:\"Forgot password?\"})})}),/*#__PURE__*/_jsxs(\"div\",{className:\"endSection\",children:[/*#__PURE__*/_jsx(Button,{variant:\"dark\",type:\"sumit\",children:\"Login\"}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Dont have an account? \",/*#__PURE__*/_jsx(Link,{to:'/signup',children:/*#__PURE__*/_jsx(\"b\",{children:\"signup\"})})]})]})]})})]});}export default AddresLogin;","map":{"version":3,"names":["React","useState","user","password","Link","useNavigate","useDispatch","useSelector","axios","Button","userAuth","ToastContainer","toast","Bounce","jsx","_jsx","jsxs","_jsxs","AddresLogin","notify","success","position","autoClose","hideProgressBar","closeOnClick","pauseOnHover","draggable","progress","undefined","theme","transition","formErr","formSetErr","isSubmited","setSubmit","navigate","dispatch","input","setInput","userName","isAuth","state","users","navigateNext","status","setTimeout","alert","HandleInputChange","e","name","target","value","validateForm","values","errors","usernamePattern","passwordPattern","test","formSumit","Object","keys","length","res","post","withCredentials","data","error","HandleSubmit","preventDefault","className","children","action","onSubmit","htmlFor","style","src","alt","type","onChange","variant","to"],"sources":["D:/faiz/BIXEL/Node-js Express/retaurants-dianamic/frontend/src/componetns/AddresLogin.jsx"],"sourcesContent":["import React, { useState } from 'react'\r\nimport './style.css'\r\nimport user from './images/icons8-username-30.png'\r\nimport password from './images/icons8-password-24.png'\r\nimport { Link } from 'react-router-dom';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport axios from 'axios';\r\nimport Button from 'react-bootstrap/Button';\r\nimport { userAuth } from '../redux/userSlice';\r\nimport { ToastContainer, toast, Bounce } from 'react-toastify';\r\n\r\nfunction AddresLogin() {\r\n\r\n    const notify = () => {\r\n        toast.success('Login successful !!!', {\r\n            position: \"top-center\",\r\n            autoClose: 3000,\r\n            hideProgressBar: false,\r\n            closeOnClick: true,\r\n            pauseOnHover: true,\r\n            draggable: true,\r\n            progress: undefined,\r\n            theme: \"light\",\r\n            transition: Bounce,\r\n        });\r\n    };\r\n\r\n\r\n    const [formErr, formSetErr] = useState({});\r\n    const [isSubmited, setSubmit] = useState(false);\r\n    const navigate = useNavigate();\r\n    const dispatch = useDispatch()\r\n    const [input, setInput] = useState({\r\n        userName: \"\",\r\n        password: \"\",\r\n    })\r\n    const isAuth = useSelector((state) => state.users.isAuth);\r\n    const navigateNext = (status) => {\r\n        if (status.success) {\r\n            notify();\r\n            dispatch(userAuth(status));\r\n            setTimeout(async () => {\r\n                navigate('/');\r\n            }, 2999);\r\n        } else {\r\n            alert(\"Invalid password or username\");\r\n        }\r\n    };\r\n\r\n\r\n    const HandleInputChange = (e) => {\r\n        const name = e.target.name;\r\n        const value = e.target.value;\r\n        setInput({ ...input, [name]: value });\r\n\r\n    }\r\n    const validateForm = (values) => {\r\n        const errors = {};\r\n        var usernamePattern = /^[a-zA-Z]{5,20}_?[a-zA-Z]*$/;\r\n        var passwordPattern = /^\\d{8}$/;\r\n\r\n        if (!values.userName) {\r\n            errors.userName = \"Username is required\"\r\n        }\r\n        else if (!usernamePattern.test(values.userName)) {\r\n            errors.userName = \"Username must be 3-20 characters and can only contain letters\"\r\n        }\r\n\r\n        if (!values.password) {\r\n            errors.password = \"password is required\"\r\n        }\r\n\r\n        else if (!passwordPattern.test(values.password)) {\r\n\r\n\r\n            errors.password = \"Enter 8 digit\"\r\n\r\n        }\r\n        return errors\r\n    }\r\n    const formSumit = async () => {\r\n        if (Object.keys(formErr).length === 0 && isSubmited) {\r\n\r\n            try {\r\n                const res = await axios.post(\"http://localhost:5000/login\", input, {\r\n                    withCredentials: true\r\n                });\r\n                navigateNext(res.data);\r\n\r\n            }\r\n            catch {\r\n                toast.error('Error during login', {\r\n                    position: \"top-center\",\r\n                    autoClose: 3000,\r\n                    closeOnClick: true,\r\n                    pauseOnHover: true,\r\n                    draggable: true,\r\n                    progress: undefined,\r\n                    theme: \"light\",\r\n                    transition: Bounce,\r\n                });\r\n            }\r\n        }\r\n    }\r\n\r\n    const HandleSubmit = (e) => {\r\n        e.preventDefault();\r\n        formSetErr(validateForm(input));\r\n        setSubmit(true)\r\n        formSumit();\r\n    };\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n    return (\r\n        <div className='Signup'>\r\n\r\n            <ToastContainer />\r\n            <div className='Signup-sub'>\r\n                <form action=\"\" onSubmit={HandleSubmit}>\r\n\r\n                    <div className='input-sty-prnt'>\r\n                        <div className='sing-head'>\r\n                            <h1>Welcome Back</h1>\r\n                            <p><b>Enter your credential to login</b></p>\r\n                        </div>\r\n                        <div className='input-sty'>\r\n                            <label htmlFor=\"\" style={{ 'textAlign': 'center' }}><b>User name</b></label>\r\n                            <div className='img-inp'>\r\n                                <img className='iconsLo' src={user} alt=\"\" />\r\n                                <input type=\"text\"\r\n                                    value={input.userName}\r\n                                    name='userName'\r\n                                    onChange={HandleInputChange}\r\n                                />\r\n                            </div>\r\n                        </div>\r\n                        <span className='error-message'>{formErr.userName}</span>\r\n                        <div className='input-sty'>\r\n                            <label htmlFor=\"\" style={{ 'textAlign': 'center' }}><b>Password</b></label>\r\n                            <div className='img-inp'>\r\n                                <img className='iconsLo' src={password} alt=\"\" />\r\n                                <input type=\"password\"\r\n                                    value={input.password}\r\n                                    name='password'\r\n                                    onChange={HandleInputChange}\r\n                                />\r\n                            </div>\r\n                        </div>\r\n                        <span className='error-message'>{formErr.password}</span>\r\n                    </div>\r\n                    <div className='fgt-pass'>\r\n                        <p><b>Forgot password?</b></p>\r\n                    </div>\r\n                    <div className='endSection'>\r\n                        <Button variant=\"dark\" type='sumit'>Login</Button>\r\n                        <p>Dont have an account? <Link to={'/signup'}><b>signup</b></Link></p>\r\n                    </div>\r\n                </form>\r\n            </div>\r\n\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default AddresLogin\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}