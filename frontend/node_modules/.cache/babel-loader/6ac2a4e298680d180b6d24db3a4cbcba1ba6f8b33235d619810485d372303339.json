{"ast":null,"code":"import React,{useState}from'react';import{useDispatch,useSelector}from'react-redux';import{useNavigate}from'react-router-dom';import axios from'axios';import Button from'react-bootstrap/Button';import{userUpdate}from'../redux/userSlice';import{ToastContainer,toast,Bounce}from'react-toastify';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function UserProfile(){const navigate=useNavigate();const dispatch=useDispatch();const userDetails=useSelector(state=>{var _state$users$user$use,_state$users,_state$users$user;return(_state$users$user$use=state===null||state===void 0?void 0:(_state$users=state.users)===null||_state$users===void 0?void 0:(_state$users$user=_state$users.user)===null||_state$users$user===void 0?void 0:_state$users$user.userDetails)!==null&&_state$users$user$use!==void 0?_state$users$user$use:'Not available';});const[input,setInput]=useState({userName:\"\",email:\"\"});const[formErr,formSetErr]=useState({});const[isSubmited,setSubmit]=useState(false);const HandleInputChange=e=>{const name=e.target.name;const value=e.target.value;setInput({...input,[name]:value});};const validateForm=values=>{const errors={};var usernamePattern=/^[a-zA-Z]{5,20}_?[a-zA-Z]*$/;var userEmailPattern=/^[a-zA-Z0-9_.+-]+@[a-zA-Z0-9-]+\\.[a-zA-Z0-9-.]+$/;if(!values.userName){errors.userName=\"Username is required\";}else if(!usernamePattern.test(values.userName)){errors.userName=\"Username must be 3-20 characters and can only contain letters\";}if(!values.email){errors.email=\" Email is required\";}else if(!userEmailPattern.test(values.email)){errors.email=\"Enter valid email\";}return errors;};const submitHandler=e=>{e.preventDefault();formSetErr(validateForm(input));setSubmit(true);formSubmit();};const notify=()=>{toast.success('Your profile successfully updated !!!',{position:\"top-center\",autoClose:3000,hideProgressBar:false,closeOnClick:true,pauseOnHover:true,draggable:true,progress:undefined,theme:\"light\",transition:Bounce});};const formSubmit=async()=>{if(Object.keys(formErr).length===0&&isSubmited){try{const res=await axios.post(\"http://localhost:5000/profileUpdate/\".concat(userDetails.userId),input,{withCredentials:true});if(res){notify();dispatch(userUpdate(res.data));setTimeout(async()=>{navigate('/dashboard');},2999);}else{toast.error('User Details not available',{position:\"top-center\",autoClose:3000,closeOnClick:true,pauseOnHover:true,draggable:true,progress:undefined,theme:\"light\",transition:Bounce});}}catch(error){toast.error(\"Error during axios.post\".concat(error),{position:\"top-center\",autoClose:3000,closeOnClick:true,pauseOnHover:true,draggable:true,progress:undefined,theme:\"light\",transition:Bounce});};}};return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"div\",{className:\"Signup\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"Signup-sub\",children:[/*#__PURE__*/_jsx(ToastContainer,{}),/*#__PURE__*/_jsxs(\"form\",{action:\"\",onSubmit:submitHandler,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"input-sty-prnt\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"sing-head\",children:/*#__PURE__*/_jsx(\"h1\",{children:\"Edit profile\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"input-sty\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"\",style:{'textAlign':'center'},children:/*#__PURE__*/_jsx(\"b\",{children:\"User name\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"img-inp\",children:/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"userName\",value:input.userName,defaultValue:userDetails.userName,onChange:HandleInputChange})})]}),/*#__PURE__*/_jsx(\"span\",{className:\"error-message\",children:formErr.userName}),/*#__PURE__*/_jsxs(\"div\",{className:\"input-sty\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"\",style:{'textAlign':'center'},children:/*#__PURE__*/_jsx(\"b\",{children:\"Email\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"img-inp\",children:/*#__PURE__*/_jsx(\"input\",{type:\"email\",name:\"email\",value:input.email,defaultValue:userDetails.userEmail,onChange:HandleInputChange})})]}),/*#__PURE__*/_jsx(\"span\",{className:\"error-message\",children:formErr.email})]}),/*#__PURE__*/_jsx(\"div\",{className:\"endSection\",children:/*#__PURE__*/_jsx(Button,{variant:\"dark\",type:\"sumit\",children:\"Edit\"})})]})]})})});}export default UserProfile;","map":{"version":3,"names":["React","useState","useDispatch","useSelector","useNavigate","axios","Button","userUpdate","ToastContainer","toast","Bounce","jsx","_jsx","jsxs","_jsxs","UserProfile","navigate","dispatch","userDetails","state","_state$users$user$use","_state$users","_state$users$user","users","user","input","setInput","userName","email","formErr","formSetErr","isSubmited","setSubmit","HandleInputChange","e","name","target","value","validateForm","values","errors","usernamePattern","userEmailPattern","test","submitHandler","preventDefault","formSubmit","notify","success","position","autoClose","hideProgressBar","closeOnClick","pauseOnHover","draggable","progress","undefined","theme","transition","Object","keys","length","res","post","concat","userId","withCredentials","data","setTimeout","error","children","className","action","onSubmit","htmlFor","style","type","defaultValue","onChange","userEmail","variant"],"sources":["D:/BIXEL/Node-js Express/retaurants-dianamic/frontend/src/componetns/UserProfile.jsx"],"sourcesContent":["\r\nimport React, { useState } from 'react';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport axios from 'axios';\r\nimport Button from 'react-bootstrap/Button';\r\nimport { userUpdate } from '../redux/userSlice';\r\nimport { ToastContainer, toast, Bounce } from 'react-toastify';\r\n\r\n\r\nfunction UserProfile() {\r\n    const navigate = useNavigate()\r\n    const dispatch = useDispatch()\r\n    const userDetails = useSelector((state) => state?.users?.user?.userDetails ?? 'Not available');\r\n\r\n    const [input, setInput] = useState({\r\n        userName: \"\",\r\n        email: \"\",\r\n    })\r\n    const [formErr, formSetErr] = useState({});\r\n    const [isSubmited, setSubmit] = useState(false)\r\n\r\n\r\n    const HandleInputChange = (e) => {\r\n        const name = e.target.name;\r\n        const value = e.target.value;\r\n        setInput({ ...input, [name]: value });\r\n\r\n\r\n    }\r\n\r\n\r\n\r\n\r\n\r\n    const validateForm = (values) => {\r\n        const errors = {};\r\n        var usernamePattern = /^[a-zA-Z]{5,20}_?[a-zA-Z]*$/;\r\n        var userEmailPattern = /^[a-zA-Z0-9_.+-]+@[a-zA-Z0-9-]+\\.[a-zA-Z0-9-.]+$/;\r\n        if (!values.userName) {\r\n            errors.userName = \"Username is required\"\r\n        }\r\n        else if (!usernamePattern.test(values.userName)) {\r\n            errors.userName = \"Username must be 3-20 characters and can only contain letters\"\r\n        }\r\n        if (!values.email) {\r\n            errors.email = \" Email is required\"\r\n        }\r\n        else if (!userEmailPattern.test(values.email)) {\r\n            errors.email = \"Enter valid email\"\r\n        }\r\n\r\n        return errors\r\n    }\r\n\r\n\r\n    const submitHandler = (e) => {\r\n        e.preventDefault();\r\n        formSetErr(validateForm(input));\r\n        setSubmit(true);\r\n        formSubmit();\r\n    };\r\n    const notify = () => {\r\n        toast.success('Your profile successfully updated !!!', {\r\n            position: \"top-center\",\r\n            autoClose: 3000,\r\n            hideProgressBar: false,\r\n            closeOnClick: true,\r\n            pauseOnHover: true,\r\n            draggable: true,\r\n            progress: undefined,\r\n            theme: \"light\",\r\n            transition: Bounce,\r\n        });\r\n    };\r\n    const formSubmit = async () => {\r\n        if (Object.keys(formErr).length === 0 && isSubmited) {\r\n            try {\r\n                const res = await axios.post(`http://localhost:5000/profileUpdate/${userDetails.userId}`, input, { withCredentials: true });\r\n                if (res) {\r\n                    notify()\r\n                    dispatch(userUpdate(res.data))\r\n                    setTimeout(async () => {\r\n                        navigate('/dashboard')\r\n                    }, 2999);\r\n                }\r\n                else {\r\n                    toast.error('User Details not available', {\r\n                        position: \"top-center\",\r\n                        autoClose: 3000,\r\n                        closeOnClick: true,\r\n                        pauseOnHover: true,\r\n                        draggable: true,\r\n                        progress: undefined,\r\n                        theme: \"light\",\r\n                        transition: Bounce,\r\n                    });\r\n                    \r\n                }\r\n            } catch (error) {\r\n                toast.error(`Error during axios.post${error}`,{\r\n                    position: \"top-center\",\r\n                    autoClose: 3000,\r\n                    closeOnClick: true,\r\n                    pauseOnHover: true,\r\n                    draggable: true,\r\n                    progress: undefined,\r\n                    theme: \"light\",\r\n                    transition: Bounce,\r\n                });\r\n            };\r\n        }\r\n    };\r\n\r\n\r\n\r\n    return (\r\n        <div>\r\n            <div className='Signup'>\r\n                <div className='Signup-sub'>\r\n                    <ToastContainer />\r\n                    <form action=\"\" onSubmit={submitHandler}>\r\n                        <div className='input-sty-prnt'>\r\n                            <div className='sing-head'>\r\n                                <h1>Edit profile</h1>\r\n                            </div>\r\n\r\n                            <div className='input-sty'>\r\n                                <label htmlFor=\"\" style={{ 'textAlign': 'center' }}><b>User name</b></label>\r\n                                <div className='img-inp'>\r\n\r\n                                    <input type=\"text\"\r\n                                        name='userName'\r\n                                        value={input.userName}\r\n                                        defaultValue={userDetails.userName}\r\n                                        onChange={HandleInputChange}\r\n\r\n                                    />\r\n                                </div>\r\n\r\n                            </div>\r\n                            <span className='error-message'>{formErr.userName}</span>\r\n\r\n                            <div className='input-sty'>\r\n                                <label htmlFor=\"\" style={{ 'textAlign': 'center' }}><b>Email</b></label>\r\n                                <div className='img-inp'>\r\n\r\n                                    <input type=\"email\" name='email'\r\n                                        value={input.email}\r\n                                        defaultValue={userDetails.userEmail}\r\n                                        onChange={HandleInputChange}\r\n\r\n\r\n\r\n                                    />\r\n                                </div>\r\n                            </div>\r\n                            <span className='error-message'>{formErr.email}</span>\r\n\r\n\r\n                        </div>\r\n                        <div className='endSection'>\r\n                            <Button variant=\"dark\" type='sumit'>Edit</Button>\r\n                        </div>\r\n                    </form>\r\n                </div>\r\n\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default UserProfile\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}