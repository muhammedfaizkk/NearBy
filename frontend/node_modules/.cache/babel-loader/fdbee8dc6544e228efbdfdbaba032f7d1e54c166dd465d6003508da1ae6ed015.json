{"ast":null,"code":"import axios from'axios';import React,{useEffect,useState}from'react';import{useSelector}from'react-redux';import Button from'react-bootstrap/Button';import trushbin from'./images/icons8-waste-50.png';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function UsersList(){const[newUser,setNewuser]=useState([]);const loggedUser=useSelector(state=>state.users.user.userDetails);const deleteAccount=async id=>{try{const res=await axios.delete(\"http://localhost:5000/deleteAccount/\".concat(id),{withCredentials:true});if(res.data.success){}else{alert('Account deletion failed.');}}catch(error){alert(\"Error during delete: \".concat(error.message));}};const userLi=async()=>{try{var _res$data$allUsers,_res$data;const res=await axios.get(\"http://localhost:5000/users\",{withCredentials:true});const allusersList=(_res$data$allUsers=res===null||res===void 0?void 0:(_res$data=res.data)===null||_res$data===void 0?void 0:_res$data.allUsers)!==null&&_res$data$allUsers!==void 0?_res$data$allUsers:[];if(res.data){const newUsers=Array.isArray(allusersList)?allusersList.filter(newUser=>newUser._id!==loggedUser.userId):[];setNewuser(newUsers);}}catch(error){console.error('Error fetching data:',error);}};const userHandler=async id=>{try{const res=await axios.put(\"http://localhost:5000/userAcive/\".concat(id),{},{withCredentials:true});if(res.data.success){userLi();}}catch(error){console.error('Error fetching data:',error);}};useEffect(()=>{userLi();},[]);return/*#__PURE__*/_jsx(\"div\",{className:\"usersList\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"users-table\",children:[/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"User Name\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Email\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Status\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Remove\"})]}),newUser&&newUser.map((element,index)=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:element.userName}),/*#__PURE__*/_jsx(\"td\",{children:element.email}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(Button,{onClick:()=>userHandler(element._id),className:\"active-btn\",variant:element.isActive?'success':'danger',children:element.isActive?'Active':'Inactive'})}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"img\",{className:\"trush-bin-userslist\",onClick:()=>deleteAccount(element._id),src:trushbin,alt:\"\"})})]},index))]})});}export default UsersList;","map":{"version":3,"names":["axios","React","useEffect","useState","useSelector","Button","trushbin","jsx","_jsx","jsxs","_jsxs","UsersList","newUser","setNewuser","loggedUser","state","users","user","userDetails","deleteAccount","id","res","delete","concat","withCredentials","data","success","alert","error","message","userLi","_res$data$allUsers","_res$data","get","allusersList","allUsers","newUsers","Array","isArray","filter","_id","userId","console","userHandler","put","className","children","map","element","index","userName","email","onClick","variant","isActive","src","alt"],"sources":["D:/BIXEL/Node-js Express/retaurants-dianamic/frontend/src/componetns/UsersList.jsx"],"sourcesContent":["import axios from 'axios'\r\nimport React, { useEffect, useState } from 'react'\r\nimport { useSelector } from 'react-redux'\r\nimport Button from 'react-bootstrap/Button';\r\nimport trushbin from './images/icons8-waste-50.png'\r\n\r\n\r\n\r\n\r\nfunction UsersList() {\r\n\r\n    const [newUser, setNewuser] = useState([])\r\n    const loggedUser = useSelector((state) => state.users.user.userDetails)\r\n    const deleteAccount = async (id) => {\r\n        try {\r\n            const res = await axios.delete(`http://localhost:5000/deleteAccount/${id}`, {\r\n                withCredentials: true\r\n            });\r\n\r\n            if (res.data.success) {\r\n\r\n            } else {\r\n                alert('Account deletion failed.');\r\n            }\r\n        } catch (error) {\r\n            alert(`Error during delete: ${error.message}`);\r\n        }\r\n    };\r\n\r\n    const userLi = async () => {\r\n        try {\r\n            const res = await axios.get(`http://localhost:5000/users`, { withCredentials: true })\r\n            const allusersList = res?.data?.allUsers ?? []\r\n            if (res.data) {\r\n                const newUsers = Array.isArray(allusersList) ? allusersList.filter((newUser) => newUser._id !== loggedUser.userId) : [];\r\n                setNewuser(newUsers);\r\n            }\r\n        } catch (error) {\r\n            console.error('Error fetching data:', error);\r\n        }\r\n    }\r\n\r\n    const userHandler = async (id) => {\r\n\r\n        try {\r\n            const res = await axios.put(`http://localhost:5000/userAcive/${id}`, {}, { withCredentials: true });\r\n            if (res.data.success) {\r\n                userLi();\r\n            }\r\n\r\n        } catch (error) {\r\n            console.error('Error fetching data:', error);\r\n        }\r\n    }\r\n    useEffect(() => {\r\n        userLi();\r\n    }, [])\r\n\r\n\r\n\r\n    return (\r\n        <div className='usersList'>\r\n            <table className='users-table'>\r\n                <tr>\r\n                    <th>User Name</th>\r\n                    <th>Email</th>\r\n                    <th>Status</th>\r\n                    <th>Remove</th>\r\n                </tr>\r\n\r\n\r\n                {newUser && newUser.map((element, index) => (\r\n\r\n                    <tr key={index}>\r\n                        <td>{element.userName}</td>\r\n                        <td>{element.email}</td>\r\n                        <td>\r\n                            <Button onClick={() => userHandler(element._id)} className='active-btn' variant={element.isActive ? 'success' : 'danger'}>\r\n                                {element.isActive ? 'Active' : 'Inactive'}\r\n                            </Button>\r\n                        </td>\r\n                        <td>\r\n                            <img className='trush-bin-userslist' onClick={() => deleteAccount(element._id)} src={trushbin} alt=\"\" />\r\n                        </td>\r\n                    </tr>\r\n                ))}\r\n\r\n            </table>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default UsersList\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}